<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checlikstu - Checklist Automatizace</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; color: #333; }
        header { background-color: #2c3e50; color: white; text-align: center; padding: 1em; }
        .container { max-width: 800px; margin: 2em auto; padding: 0 1em; }
        .checklist { background: white; padding: 2em; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .checklist h2 { color: #2c3e50; margin-bottom: 1em; }
        .checklist-item { display: flex; align-items: center; margin-bottom: 1em; }
        .checklist-item input[type="checkbox"] { margin-right: 1em; }
        .checklist-item label { font-size: 1.1em; }
        .completed { text-decoration: line-through; color: #888; }
        @media (max-width: 600px) { .container { margin: 1em; } }
    </style>
</head>
<body>
    <header><h1>Checlikstu</h1></header>
    <div class="container">
        <section class="checklist">
            <h2>Checklist projektu automatizace</h2>
            <div class="checklist-item"><input type="checkbox" id="task1"><label for="task1">Analýza požadavků projektu</label></div>
            <div class="checklist-item"><input type="checkbox" id="task2"><label for="task2">Návrh automatizačních procesů</label></div>
            <div class="checklist-item"><input type="checkbox" id="task3"><label for="task3">Výběr technologií a nástrojů</label></div>
            <div class="checklist-item"><input type="checkbox" id="task4"><label for="task4">Implementace automatizačních skriptů</label></div>
            <div class="checklist-item"><input type="checkbox" id="task5"><label for="task5">Testování automatizace</label></div>
            <div class="checklist-item"><input type="checkbox" id="task6"><label for="task6">Nasazení do produkčního prostředí</label></div>
            <div class="checklist-item"><input type="checkbox" id="task7"><label for="task7">Dokumentace projektu</label></div>
        </section>
    </div>

    <!-- Firebase modular SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getDatabase, ref, onValue, set } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyALhWs0vz-ZG84KWXXdF8CoMZu6b6zFuDQ",
            authDomain: "checklist-3aaa2.firebaseapp.com",
            databaseURL: "https://checklist-3aaa2-default-rtdb.firebaseio.com",
            projectId: "checklist-3aaa2",
            storageBucket: "checklist-3aaa2.appspot.com",
            messagingSenderId: "315001625337",
            appId: "1:315001625337:web:10d787a6c1440437166028",
            measurementId: "G-CX7TCLZDN3"
        };

        // Inicializace Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Synchronizace checklistu
        document.querySelectorAll('.checklist-item input').forEach(checkbox => {
            const taskId = checkbox.id;
            const taskRef = ref(database, 'checklist/' + taskId);

            // Načtení stavu při startu
            onValue(taskRef, snapshot => {
                const checked = snapshot.val();
                if (checked) {
                    checkbox.checked = true;
                    checkbox.nextElementSibling.classList.add('completed');
                } else {
                    checkbox.checked = false;
                    checkbox.nextElementSibling.classList.remove('completed');
                }
            });

            // Ukládání stavu při změně
            checkbox.addEventListener('change', function() {
                set(taskRef, this.checked);
                if (this.checked) {
                    this.nextElementSibling.classList.add('completed');
                } else {
                    this.nextElementSibling.classList.remove('completed');
                }
            });
        });
    </script>
</body>
</html>
